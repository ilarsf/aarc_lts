<!-- Additional head content -->
<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="{{ site.baseurl }}/assets/images/favicon/favicon.ico">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Custom CSS Overrides -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/override.css">
<!-- Button Styles -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/buttons.css">
<!-- Accordion Styles -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/accordion.css">
<!-- Category Navigation Styles -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/category-nav.css">
<!-- Tab Icons Styles -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/tab-icons.css">
<!-- Tabs Styles -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/tabs.css">
<!-- Drills Styles -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/drills.css">
<!-- Quiz Integration Styles -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/quiz-integration.css">
<!-- Textbook Styles -->
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/textbook-styles.css">
<!-- Coach Authentication JS -->
<script src="{{ site.baseurl }}/assets/js/coach-auth.js"></script>
<!-- Search Exclusion JS -->
<script src="{{ site.baseurl }}/assets/js/search-exclusion.js"></script>
<!-- Accordion JS -->
<script src="{{ site.baseurl }}/assets/js/accordion.js"></script>
<!-- Quiz Integration JS -->
<script src="{{ site.baseurl }}/assets/js/quiz-integration.js"></script>

<!-- Global CSS Variables -->
<style>
  :root {
    --theme-color: #0073E6;
    --theme-color-dark: #005BB5;
    --aarc-blue: #0073E6;
    --aarc-blue-hover: #005BB5;
  }

  /* Global button styles to ensure consistency */
  .btn,
  .button-primary,
  .cta-button {
    display: inline-block;
    padding: 8px 16px;
    background-color: var(--theme-color);
    color: white !important;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    margin-top: 0.5rem;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  }

  .btn:hover,
  .button-primary:hover,
  .cta-button:hover {
    background-color: var(--theme-color-dark);
    color: white !important;
    text-decoration: none;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
  }
</style>

<style>
  /* Mobile-specific additional styles - commented out to avoid conflict with style.scss
  @media screen and (max-width: 600px) {
    .site-nav {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-in-out;
    }
    
    .site-nav.active {
      max-height: 500px;
    }
  }
  */

  /* Fix for bullet points in navigation menu */
  .site-nav ul,
  .site-nav ul.fallback-nav,
  .site-nav ul.dropdown-menu,
  .dropdown-menu {
    list-style-type: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .site-nav li,
  .site-nav ul li,
  .site-nav ul.fallback-nav li,
  .site-nav ul.dropdown-menu li,
  .dropdown-menu li {
    list-style-type: none !important;
    list-style-image: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .site-nav li:before,
  .site-nav ul li:before,
  .site-nav ul.fallback-nav li:before,
  .site-nav ul.dropdown-menu li:before,
  .dropdown-menu li:before {
    content: none !important;
    display: none !important;
  }

  /* Fix general bullet points in the content */
  .main-content>ul li,
  .main-content section ul li,
  .main-content div ul li,
  .info-box ul li {
    list-style-type: disc !important;
    list-style-image: none !important;
    margin-left: 20px !important;
  }

  .main-content ul,
  .info-box ul {
    padding-left: 20px !important;
  }

  .main-content ul li:before,
  .info-box ul li:before {
    content: none !important;
    display: none !important;
  }

  /* Custom CTA button styles */
  .cta-large {
    display: inline-block;
    background-color: #1E73BE;
    color: #ffffff;
    padding: 1rem 2rem;
    border-radius: 6px;
    font-weight: 600;
    font-size: 1.2rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 2rem 0;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
  }

  .cta-large:hover {
    background-color: #165c98;
    text-decoration: none;
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  /* Image placeholder icon */
  .image-placeholder .icon i {
    font-size: 2.5rem;
    color: #aaaaaa;
  }

  /* Smooth scroll for anchor links */
  html {
    scroll-behavior: smooth;
  }

  /* Highlight current section */
  .section-highlight {
    animation: highlightFade 2s ease-out;
  }

  @keyframes highlightFade {
    0% {
      background-color: rgba(30, 115, 190, 0.2);
    }

    100% {
      background-color: transparent;
    }
  }

  /* Header actions and search link */
  .header-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    margin-top: 15px;
  }

  .search-link {
    display: inline-block;
    margin-right: 15px;
    padding: 8px 16px;
    background-color: #0066cc;
    color: white !important;
    /* Force white color */
    border-radius: 4px;
    text-decoration: none !important;
    /* Force no text decoration */
    font-weight: 600;
    border-bottom: none !important;
    /* Force no bottom border */
  }

  .search-link:hover {
    background-color: #004c99;
    color: white !important;
    text-decoration: none !important;
    border-bottom: none !important;
  }

  .search-link i {
    margin-right: 5px;
  }

  .mobile-nav-toggle {
    background: transparent;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 8px 12px;
    cursor: pointer;
    color: #333;
    display: none;
    /* Hidden by default on desktop */
    font-size: 16px;
  }

  /* Enhanced styling for simplified homepage */
  .quick-links h3 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .quick-links .info-box {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .quick-links .info-box:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }

  .three-col-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 20px;
  }

  .text-center {
    text-align: center;
  }

  @media (max-width: 768px) {
    .three-col-grid {
      grid-template-columns: 1fr;
    }

    /* Mobile header & navigation styles */
    .page-header .container-lg {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    /* Improve header layout on mobile */
    .project-name {
      font-size: 24px !important;
      margin-bottom: 5px !important;
    }

    .project-tagline {
      font-size: 16px !important;
      margin-bottom: 15px !important;
    }

    .header-actions {
      justify-content: space-between;
      width: 100%;
      margin: 15px 0 5px;
    }

    .search-link {
      margin: 0;
    }

    /* Show mobile toggle button */
    .mobile-nav-toggle {
      display: inline-block !important;
      margin-left: auto;
      z-index: 100;
    }

    /* Override the style.scss mobile navigation with cleaner style */
    .site-nav {
      display: none;
      /* Hidden by default */
      width: 100%;
      margin-top: 10px;
      padding: 0;
      background: white;
      border: 1px solid #eee;
      border-radius: 4px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .site-nav.active {
      display: block;
      /* Show when active */
    }

    /* Prioritize these mobile nav styles */
    .site-nav ul {
      display: block !important;
      flex-direction: column !important;
      width: 100%;
      padding: 0 !important;
      margin: 0 !important;
    }

    .site-nav li {
      display: block !important;
      width: 100% !important;
      margin: 0 !important;
      border-bottom: 1px solid #eee;
    }

    .site-nav li:last-child {
      border-bottom: none;
    }

    .site-nav a {
      display: block !important;
      padding: 12px 15px !important;
      border-left: 3px solid transparent !important;
    }

    .site-nav a:hover {
      background-color: #f9f9f9 !important;
      border-left: 3px solid #0066cc !important;
    }

    /* Fix dropdown menus on mobile */
    .dropdown-menu {
      position: static !important;
      width: 100% !important;
      box-shadow: none !important;
      display: none !important;
      /* Initially hidden, will be controlled by JS */
      padding: 0 0 0 15px !important;
      margin: 0 !important;
      background-color: #f8f8f8 !important;
    }

    /* This will override the display:none when JS sets display:block directly */
    .dropdown-menu[style*="display: block"] {
      display: block !important;
    }

    .dropdown-menu li {
      border-bottom: none !important;
    }

    .dropdown-menu a {
      padding: 8px 15px !important;
      font-size: 14px !important;
    }

    /* Dropdown toggle button styling */
    .dropdown-toggle {
      background: none;
      border: none;
      color: #666;
      font-size: 18px;
      font-weight: bold;
      padding: 0 8px;
      cursor: pointer;
      position: absolute;
      right: 10px;
      top: 10px;
    }
  }
</style>

<!-- Tab and Navigation JavaScript -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Initialize tabs
    const tabContainers = document.querySelectorAll('.tab-container');

    tabContainers.forEach(container => {
      const tabLinks = container.querySelectorAll('.tab-link');
      const tabContents = container.querySelectorAll('.tab-content');

      // Check for hash in URL to activate specific tab
      const hash = window.location.hash;
      let activeTabSet = false;

      // Set first tab as active by default
      if (tabLinks.length > 0 && !activeTabSet) {
        tabLinks[0].classList.add('active');
      }

      if (tabContents.length > 0 && !activeTabSet) {
        tabContents[0].classList.add('active');
      }

      // Add click event to tab links
      tabLinks.forEach(link => {
        link.addEventListener('click', function (e) {
          e.preventDefault();

          // Get target tab ID
          const targetId = this.getAttribute('data-tab');

          // Remove active class from all tabs and content
          tabLinks.forEach(tab => tab.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));

          // Add active class to current tab and content
          this.classList.add('active');
          document.getElementById(targetId).classList.add('active');

          // Update URL hash for direct linking
          if (history.pushState) {
            history.pushState(null, null, '#' + targetId);
          } else {
            location.hash = '#' + targetId;
          }
        });
      });
    });

    // Auto-generate TOC when present
    const tocContainer = document.querySelector('.page-toc-container');
    if (tocContainer) {
      const headings = document.querySelectorAll('h2, h3');
      const tocList = document.createElement('ul');

      headings.forEach((heading, index) => {
        // Create ID if not present
        if (!heading.id) {
          heading.id = 'section-' + index;
        }

        const listItem = document.createElement('li');
        const link = document.createElement('a');

        link.href = '#' + heading.id;
        link.textContent = heading.textContent;

        // Indent h3 elements
        if (heading.tagName === 'H3') {
          listItem.style.paddingLeft = '1rem';
        }

        listItem.appendChild(link);
        tocList.appendChild(listItem);
      });

      tocContainer.appendChild(tocList);
    }

    // Handle anchor link highlighting
    if (window.location.hash) {
      const targetElement = document.querySelector(window.location.hash);
      if (targetElement) {
        setTimeout(() => {
          targetElement.classList.add('section-highlight');

          // Scroll to element with offset for fixed header
          const headerOffset = 80;
          const elementPosition = targetElement.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: "smooth"
          });
        }, 100);
      }
    }

    // Add icons to image placeholders
    const imagePlaceholders = document.querySelectorAll('.image-placeholder .icon');
    imagePlaceholders.forEach(placeholder => {
      if (!placeholder.querySelector('i')) {
        placeholder.innerHTML = '<i class="fas fa-image"></i>';
      }
    });
  });
</script>